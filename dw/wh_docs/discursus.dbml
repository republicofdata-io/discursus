project wh_discursus {

    database_type: 'snowflake'

}

// CORE WAREHOUSE DIMENSIONS

table countries_dim {

    country_pk varchar [pk]

    country_code varchar
    country_name varchar

}


// CORE WAREHOUSE FACTS

table events_fct {

    event_pk varchar [pk]
    action_country_fk varchar [ref: - countries_dim.country_pk]

    gdelt_event_natural_key int

    published_date date
    creation_ts timestamp

    source_url varchar
    action_geo_full_name varchar
    action_geo_adm1_code varchar
    action_geo_latitude decimal
    action_geo_longitude decimal
    actor1_name varchar
    actor1_type1 varchar //change
    actor2_name varchar
    actor2_type1 varchar //change
    event_type varchar //change

    goldstein_scale decimal
    num_mentions int
    num_sources int
    num_articles int
    avg_tone decimal

}

table articles_fct {

    article_pk varchar [pk]
    event_fk varchar [ref: - events_fct.event_pk]

    gdelt_event_natural_key int
    article_url varchar

    article_ts timestamp

    article_source_name varchar

}